{
  "title": "Query Builder SQL (MariaDB)",
  "language": "en",
  "tags": ["sql", "mariadb", "query-builder", "python", "frappe", "pypika"],
  "items": [
    {
      "code": "frappe.qb.from_('MyDocType').select(...)",
      "description": "Performs a basic SELECT query.",
      "example": "query = frappe.qb.from_('Customer').select('name', 'customer_name')\n# SQL: SELECT `name`,`customer_name` FROM `tabCustomer`"
    },
    {
      "code": "customers = frappe.qb.DocType('Customer')",
      "description": "Gets a `pypika` table object to use in complex queries.",
      "example": "Customer = frappe.qb.DocType('Customer')\nquery = frappe.qb.from_(Customer).select(Customer.name).where(Customer.customer_name == 'Acme')"
    },
    {
      "code": "query.where(...).where(...)",
      "description": "Adds `WHERE` conditions to the query.",
      "example": "Customer = frappe.qb.DocType('Customer')\nquery = frappe.qb.from_(Customer).select('name').where(Customer.territory == 'USA').where(Customer.customer_group == 'Retail')"
    },
    {
      "code": "query.run(as_dict=True)",
      "description": "Executes the query and returns the results as a list of dictionaries.",
      "example": "results = frappe.qb.from_('ToDo').select('name', 'description').run(as_dict=True)"
    },
    {
      "code": "from frappe.query_builder.functions import Count",
      "description": "Uses aggregate functions like `Count`, `Sum`, `Avg`.",
      "example": "from frappe.query_builder.functions import Count\nTask = frappe.qb.DocType('Task')\nquery = frappe.qb.from_(Task).select(Count(Task.name).as_('total_tasks'))\n# SQL: SELECT COUNT(`name`) 'total_tasks' FROM `tabTask`"
    },
    {
      "code": "query.orderby(...).limit(...)",
      "description": "Orders and limits the results.",
      "example": "from pypika import Order\nTask = frappe.qb.DocType('Task')\nquery = frappe.qb.from_(Task).select('subject').orderby(Task.creation, order=Order.desc).limit(10)"
    },
    {
      "code": "query.left_join(...).on(...)",
      "description": "Joins multiple tables.",
      "example": "SalesOrder = frappe.qb.DocType('Sales Order')\nCustomer = frappe.qb.DocType('Customer')\nquery = frappe.qb.from_(SalesOrder)\n    .left_join(Customer).on(SalesOrder.customer == Customer.name)\n    .select(SalesOrder.name, Customer.customer_name)"
    }
  ],
  "created": "2025-09-27",
  "updated": "2025-10-01"
}